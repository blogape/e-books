{"remainingRequest":"/Users/chenzehua/Documents/work/vue-book/e-book/node_modules/babel-loader/lib/index.js!/Users/chenzehua/Documents/work/vue-book/e-book/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/chenzehua/Documents/work/vue-book/e-book/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenzehua/Documents/work/vue-book/e-book/src/components/ebook/EbookReader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenzehua/Documents/work/vue-book/e-book/src/components/ebook/EbookReader.vue","mtime":1550026600901},{"path":"/Users/chenzehua/Documents/work/vue-book/e-book/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenzehua/Documents/work/vue-book/e-book/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenzehua/Documents/work/vue-book/e-book/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenzehua/Documents/work/vue-book/e-book/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport _objectSpread from \"/Users/chenzehua/Documents/work/vue-book/e-book/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\nimport Epub from \"epubjs\";\nimport { mapGetters } from \"vuex\";\nimport { exists } from \"fs\";\nglobal.ePub = Epub;\nexport default {\n  computed: _objectSpread({}, mapGetters([\"fileName\", \"menuVisible\"])),\n  methods: {\n    prevPage: function prevPage() {\n      if (this.rendition) {\n        this.rendition.prev();\n      }\n    },\n    nextPage: function nextPage() {\n      if (this.rendition) {\n        this.rendition.next();\n      }\n    },\n    toggleTitleAndMenu: function toggleTitleAndMenu() {\n      console.log('title');\n      console.log(this.$store.state.book.menuVisible);\n      this.$store.dispatch('setMenuVisible', !this.$store.state.book.menuVisible);\n    },\n    initEpub: function initEpub() {\n      var _this = this;\n\n      var url = \"http://192.168.1.80:9001/epub/\" + this.$store.state.book.fileName + \".epub\";\n      this.book = new Epub(url); //   向ifram 绑定事件\n\n      this.rendition = this.book.renderTo(\"read\", {\n        width: innerWidth,\n        height: innerHeight,\n        method: \"default\"\n      });\n      /* 触摸开始*/\n\n      this.rendition.display();\n      this.rendition.on(\"touchstart\", function (event) {\n        /* 获取点击X坐标 */\n        _this.touchStartX = event.changedTouches[0].clientX;\n        /* 获取点击Y坐标 */\n\n        _this.touchStartY = event.changedTouches[0].clientY;\n        /* 获取长按时间 */\n\n        _this.touchStartTime = event.timeStamp;\n      });\n      this.rendition.on(\"touchend\", function (event) {\n        var offseX = event.changedTouches[0].clientX - _this.touchStartX;\n        var time = event.timeStamp - _this.touchStartTime;\n        console.log(offseX, time);\n\n        if (time < 500 && offseX > 40) {\n          _this.prevPage();\n        } else if (time < 500 && offseX < -40) {\n          _this.nextPage();\n        } else {\n          _this.toggleTitleAndMenu();\n        }\n\n        event.preventDefault();\n        event.stopPropagation();\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    console.log(this);\n    this.$store.dispatch(\"setFileName\", this.$route.params.fileName.split(\"|\").join(\"/\")).then(function () {\n      _this2.initEpub();\n    });\n  }\n};",{"version":3,"sources":["EbookReader.vue"],"names":[],"mappings":";;;;;;;;AAOA,OAAA,IAAA,MAAA,QAAA;AACA,SAAA,UAAA,QAAA,MAAA;AACA,SAAA,MAAA,QAAA,IAAA;AAEA,MAAA,CAAA,IAAA,GAAA,IAAA;AAEA,eAAA;AACA,EAAA,QAAA,oBACA,UAAA,CAAA,CAAA,UAAA,EAAA,aAAA,CAAA,CADA,CADA;AAIA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,UAAA,KAAA,SAAA,EAAA;AACA,aAAA,SAAA,CAAA,IAAA;AACA;AACA,KALA;AAMA,IAAA,QANA,sBAMA;AACA,UAAA,KAAA,SAAA,EAAA;AACA,aAAA,SAAA,CAAA,IAAA;AACA;AACA,KAVA;AAYA,IAAA,kBAZA,gCAYA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,OAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,WAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,gBAAA,EAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,WAAA;AACA,KAhBA;AAkBA,IAAA,QAlBA,sBAkBA;AAAA;;AACA,UAAA,GAAA,GACA,mCACA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,QADA,GAEA,OAHA;AAIA,WAAA,IAAA,GAAA,IAAA,IAAA,CAAA,GAAA,CAAA,CALA,CAMA;;AACA,WAAA,SAAA,GAAA,KAAA,IAAA,CAAA,QAAA,CAAA,MAAA,EAAA;AACA,QAAA,KAAA,EAAA,UADA;AAEA,QAAA,MAAA,EAAA,WAFA;AAGA,QAAA,MAAA,EAAA;AAHA,OAAA,CAAA;AAKA;;AACA,WAAA,SAAA,CAAA,OAAA;AACA,WAAA,SAAA,CAAA,EAAA,CAAA,YAAA,EAAA,UAAA,KAAA,EAAA;AACA;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,KAAA,CAAA,cAAA,CAAA,CAAA,EAAA,OAAA;AACA;;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,KAAA,CAAA,cAAA,CAAA,CAAA,EAAA,OAAA;AACA;;AACA,QAAA,KAAA,CAAA,cAAA,GAAA,KAAA,CAAA,SAAA;AACA,OAPA;AAQA,WAAA,SAAA,CAAA,EAAA,CAAA,UAAA,EAAA,UAAA,KAAA,EAAA;AACA,YAAA,MAAA,GAAA,KAAA,CAAA,cAAA,CAAA,CAAA,EAAA,OAAA,GAAA,KAAA,CAAA,WAAA;AACA,YAAA,IAAA,GAAA,KAAA,CAAA,SAAA,GAAA,KAAA,CAAA,cAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,MAAA,EAAA,IAAA;;AACA,YAAA,IAAA,GAAA,GAAA,IAAA,MAAA,GAAA,EAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA;AACA,SAFA,MAEA,IAAA,IAAA,GAAA,GAAA,IAAA,MAAA,GAAA,CAAA,EAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA;AACA,SAFA,MAEA;AACA,UAAA,KAAA,CAAA,kBAAA;AACA;;AACA,QAAA,KAAA,CAAA,cAAA;AACA,QAAA,KAAA,CAAA,eAAA;AACA,OAbA;AAcA;AAtDA,GAJA;AA4DA,EAAA,OA5DA,qBA4DA;AAAA;;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,SAAA,MAAA,CACA,QADA,CACA,aADA,EACA,KAAA,MAAA,CAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA,EAAA,IAAA,CAAA,GAAA,CADA,EAEA,IAFA,CAEA,YAAA;AACA,MAAA,MAAA,CAAA,QAAA;AACA,KAJA;AAKA;AAnEA,CAAA","sourcesContent":["<template>\n  <div class=\"ebook-reader\">\n    <div id=\"read\"></div>\n  </div>\n</template>\n\n<script>\nimport Epub from \"epubjs\";\nimport { mapGetters } from \"vuex\";\nimport { exists } from \"fs\";\n\nglobal.ePub = Epub;\n\nexport default {\n  computed: {\n    ...mapGetters([\"fileName\",\"menuVisible\"])\n  },\n  methods: {\n    prevPage() {\n      if (this.rendition) {\n        this.rendition.prev();\n      }\n    },\n    nextPage() {\n      if (this.rendition) {\n        this.rendition.next();\n      }\n    },\n\n    toggleTitleAndMenu() {\n      console.log('title');\n      console.log(this.$store.state.book.menuVisible);\n      this.$store.dispatch('setMenuVisible',!this.$store.state.book.menuVisible)\n    },\n\n    initEpub() {\n      const url =\n        \"http://192.168.1.80:9001/epub/\" +\n        this.$store.state.book.fileName +\n        \".epub\";\n      this.book = new Epub(url);\n      //   向ifram 绑定事件\n      this.rendition = this.book.renderTo(\"read\", {\n        width: innerWidth,\n        height: innerHeight,\n        method: \"default\"\n      });\n      /* 触摸开始*/\n      this.rendition.display();\n      this.rendition.on(\"touchstart\", event => {\n        /* 获取点击X坐标 */\n        this.touchStartX = event.changedTouches[0].clientX;\n        /* 获取点击Y坐标 */\n        this.touchStartY = event.changedTouches[0].clientY;\n        /* 获取长按时间 */\n        this.touchStartTime = event.timeStamp;\n      });\n      this.rendition.on(\"touchend\", event => {\n        const offseX = event.changedTouches[0].clientX - this.touchStartX;\n        const time = event.timeStamp - this.touchStartTime;\n        console.log(offseX, time);\n        if (time < 500 && offseX > 40) {\n          this.prevPage();\n        } else if (time < 500 && offseX < -40) {\n          this.nextPage();\n        } else {\n          this.toggleTitleAndMenu();\n        }\n        event.preventDefault();\n        event.stopPropagation();\n      });\n    }\n  },\n  mounted() {\n    console.log(this);\n    this.$store\n      .dispatch(\"setFileName\", this.$route.params.fileName.split(\"|\").join(\"/\"))\n      .then(() => {\n        this.initEpub();\n      });\n  }\n};\n</script>\n\n<style>\n</style>\n"],"sourceRoot":"src/components/ebook"}]}